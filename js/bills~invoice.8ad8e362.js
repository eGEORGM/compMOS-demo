(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{160:function(e,n,t){"use strict";t.d(n,"a",(function(){return o})),t.d(n,"c",(function(){return a})),t.d(n,"b",(function(){return l})),t.d(n,"d",(function(){return r}));var i=t(159),s=t.n(i);function o(e,n=2,t="Â¥"){if(null==e||isNaN(e))return t+"0.00";const i=Number(e).toFixed(n).split(".");return t+i[0].replace(/\B(?=(\d{3})+(?!\d))/g,",")+(i[1]?"."+i[1]:"")}function a(e,n="YYYY-MM-DD"){return e?s()(e).format(n):"-"}function l(e,n){if(!e)return"-";if(n&&n.startDate&&n.endDate)return r(n.startDate,n.endDate);const[t,i]=e.split("-");return`${t}å¹´${parseInt(i)}æœˆ`}function r(e,n){if(!e||!n)return"-";return`${a(e,"YYYYå¹´MæœˆDæ—¥")} è‡³ ${a(n,"YYYYå¹´MæœˆDæ—¥")}`}},161:function(e,n,t){"use strict";t.d(n,"a",(function(){return r})),t.d(n,"b",(function(){return c})),t.d(n,"c",(function(){return d}));var i=t(60);const s={1e3:"æ“ä½œå¤±è´¥",1001:"å‚æ•°é”™è¯¯",1002:"æ•°æ®ä¸å­˜åœ¨",1003:"æ•°æ®å·²å­˜åœ¨",1004:"æ“ä½œè¢«æ‹’ç»",1005:"æ“ä½œè¶…æ—¶",10001:"è´¦å•ä¸å­˜åœ¨",10002:"è´¦å•çŠ¶æ€ä¸å…è®¸æ­¤æ“ä½œ",10003:"è´¦å•ç¡®è®¤å¤±è´¥ï¼Œè¯·æ£€æŸ¥è®¢å•æ•°æ®",10004:"è´¦å•å·²è¿›å…¥å¼€ç¥¨æµç¨‹ï¼Œæ— æ³•æ’¤é”€ç¡®è®¤",10005:"è´¦å•åŒ…å«æœªæ ¸å¯¹è®¢å•ï¼Œæ— æ³•ç¡®è®¤",10006:"è´¦å•å·²ç¡®è®¤ï¼Œæ— æ³•ä¿®æ”¹",10007:"è´¦å•å°šæœªç¡®è®¤ï¼Œæ— æ³•å¼€ç¥¨",10008:"è´¦å•å¯¼å‡ºå¤±è´¥",20001:"å¼€ç¥¨ç”³è¯·å¤±è´¥",20002:"å‘ç¥¨æŠ¬å¤´ä¿¡æ¯ä¸å®Œæ•´",20003:"å¼€ç¥¨é‡‘é¢è¶…è¿‡å¯å¼€ç¥¨é‡‘é¢",20004:"å‘ç¥¨ç§ç±»ä¸æ”¯æŒ",20005:"å‘ç¥¨ä¸å­˜åœ¨",20006:"å‘ç¥¨å·²çº¢å†²ï¼Œæ— æ³•å†æ¬¡æ“ä½œ",20007:"å‘ç¥¨ä¸‹è½½å¤±è´¥",20008:"çº¢å†²å¤±è´¥ï¼Œè¯·è”ç³»å®¢æœ",20009:"æ¢å¼€å¤±è´¥ï¼Œè¯·æ£€æŸ¥å‘ç¥¨æŠ¬å¤´ä¿¡æ¯",20010:"å‘ç¥¨æŠ¬å¤´å·²å­˜åœ¨",20011:"å‘ç¥¨æ•°é‡è¶…è¿‡é™åˆ¶",30001:"è®¢å•ä¸å­˜åœ¨",30002:"è®¢å•çŠ¶æ€å¼‚å¸¸",30003:"è®¢å•å·²æ ¸å¯¹ï¼Œæ— æ³•ä¿®æ”¹",30004:"è®¢å•æ‰¹é‡æ“ä½œå¤±è´¥",30005:"è®¢å•è°ƒè´¦å¤±è´¥",40001:"é…ç½®ä¿å­˜å¤±è´¥",40002:"PDFå­—æ®µè¶…è¿‡20ä¸ªé™åˆ¶",40003:"æ˜ç»†è®¾ç½®ä¿å­˜å¤±è´¥",40004:"å­—æ®µé…ç½®æ— æ•ˆ",40005:"æ‹†åˆ†ç»´åº¦é‡å¤",50001:"æ— è®¿é—®æƒé™",50002:"æ“ä½œæƒé™ä¸è¶³",50003:"ä¼ä¸šæœªæˆæƒ",50004:"åŠŸèƒ½æœªå¼€æ”¾",90001:"ç½‘ç»œè¿æ¥å¤±è´¥",90002:"è¯·æ±‚è¶…æ—¶",90003:"æœåŠ¡ä¸å¯ç”¨",90004:"æœåŠ¡å™¨é”™è¯¯"},o={400:"è¯·æ±‚å‚æ•°é”™è¯¯",401:"æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½•",403:"æ‹’ç»è®¿é—®",404:"è¯·æ±‚åœ°å€ä¸å­˜åœ¨",408:"è¯·æ±‚è¶…æ—¶",500:"æœåŠ¡å™¨å†…éƒ¨é”™è¯¯",502:"ç½‘å…³é”™è¯¯",503:"æœåŠ¡ä¸å¯ç”¨",504:"ç½‘å…³è¶…æ—¶"},a={INFO:"info",WARN:"warn",ERROR:"error",FATAL:"fatal"};function l(e,n="æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"){return s[e]||o[e]||n}function r(e,n={}){const{silent:t=!1,showConfirm:s=!1,customMessage:o=null,onError:r=null}=n,c=function(e){const n={code:null,message:"æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",level:a.ERROR,details:null,timestamp:(new Date).toISOString()};if(e.response){const{status:t,data:i}=e.response;n.code=i.code||t,n.message=l(n.code,i.message),n.details={status:t,url:e.config&&e.config.url,method:e.config&&e.config.method,data:i},t>=500?n.level=a.FATAL:t>=400&&(n.level=a.ERROR)}else e.request?(n.code=90001,n.message="ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ",n.level=a.WARN,n.details={url:e.config&&e.config.url,timeout:e.config&&e.config.timeout}):(n.message=e.message||"æœªçŸ¥é”™è¯¯",n.details={stack:e.stack});return n}(e);if(function(e){const{level:n,message:t,code:i,details:s,timestamp:o}=e,l=`[${o}] [${n.toUpperCase()}] Code: ${i}, Message: ${t}`;switch(n){case a.INFO:console.info(l,s);break;case a.WARN:console.warn(l,s);break;case a.ERROR:console.error(l,s);break;case a.FATAL:console.error("ğŸ’¥",l,s);break;default:console.log(l,s)}1}(c),r&&"function"==typeof r&&r(c),t)return c;const d=o||c.message;return s?i.MessageBox.alert(d,"é”™è¯¯",{type:"error",confirmButtonText:"ç¡®å®š"}):Object(i.Message)({message:d,type:"error",duration:5e3,showClose:!0}),c}function c(e,n=3e3){Object(i.Message)({message:e,type:"success",duration:n,showClose:!0})}function d(e,n=3e3){Object(i.Message)({message:e,type:"warning",duration:n,showClose:!0})}},306:function(e,n,t){"use strict";function i(e){if(!e)return!1;const n=e.replace(/\s/g,"");return/^[A-Z0-9]{15}$|^[A-Z0-9]{18}$|^[A-Z0-9]{20}$/.test(n)}t.d(n,"c",(function(){return i})),t.d(n,"b",(function(){return s})),t.d(n,"a",(function(){return o}));function s(e){if(!e)return!1;return/^1[3-9]\d{9}$/.test(e)}function o(e){if(!e)return!1;return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)}},310:function(e,n,t){var i=t(18),s=t(337);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var o={insert:"head",singleton:!1};i(s,o);e.exports=s.locals||{}},311:function(e,n,t){var i=t(18),s=t(339);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var o={insert:"head",singleton:!1};i(s,o);e.exports=s.locals||{}},312:function(e,n,t){var i=t(18),s=t(341);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var o={insert:"head",singleton:!1};i(s,o);e.exports=s.locals||{}},315:function(e,n,t){"use strict";var i={name:"InvoiceTitleSelector",props:{value:{type:String,default:""},titles:{type:Array,default:()=>[]},size:{type:String,default:"medium"}},methods:{formatTitleLabel:e=>`${e.titleName} (${e.taxNumber})`,handleChange(e){const n=this.titles.find(n=>n.titleId===e);this.$emit("input",e),this.$emit("change",n)}}},s=(t(336),t(12)),o=Object(s.a)(i,(function(){var e=this,n=e._self._c;return n("el-select",{attrs:{value:e.value,placeholder:"è¯·é€‰æ‹©å‘ç¥¨æŠ¬å¤´",size:e.size},on:{change:e.handleChange}},e._l(e.titles,(function(t){return n("el-option",{key:t.titleId,attrs:{label:e.formatTitleLabel(t),value:t.titleId}},[n("div",{staticClass:"title-option"},[n("div",{staticClass:"title-main"},[n("span",{staticClass:"title-name"},[e._v(e._s(t.titleName))]),e._v(" "),t.isDefault?n("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("é»˜è®¤")]):e._e()],1),e._v(" "),n("div",{staticClass:"title-info"},[e._v("\n        ç¨å·ï¼š"+e._s(t.taxNumber)+"\n      ")])])])})),1)}),[],!1,null,"0b12f5d4",null).exports,a=t(160),l=t(306),r={name:"InvoiceForm",components:{InvoiceTitleSelector:o},props:{invoiceRows:{type:Array,required:!0},splitConfig:{type:Object,default:()=>({dimensions:[]})},titles:{type:Array,default:()=>[]}},watch:{titles:{immediate:!0,handler(e){console.log("InvoiceForm - titles å˜åŒ–:",e)}}},data:()=>({localInvoiceRows:[],submitting:!1,receivers:[{id:"1",name:"å¼ ä¸‰",phone:"13800138000",email:"zhangsan@example.com",address:"åŒ—äº¬å¸‚æµ·æ·€åŒºä¸­å…³æ‘å¤§è¡—1å·"},{id:"2",name:"æå››",phone:"13900139000",email:"lisi@example.com",address:"åŒ—äº¬å¸‚æœé˜³åŒºå»ºå›½è·¯88å·"},{id:"3",name:"ç‹äº”",phone:"13700137000",email:"wangwu@example.com",address:"ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºä¸–çºªå¤§é“1å·"}]}),computed:{hasGrouping(){return this.splitConfig&&this.splitConfig.dimensions&&this.splitConfig.dimensions.length>0},groupingDescription(){if(!this.hasGrouping)return"";const{SPLIT_DIMENSION_NAMES:e}=t(0);return this.splitConfig.dimensions.map(n=>e[n]||n).join(" å’Œ ")},invoiceTypeSpanMap(){const e=new Map,n=new Map;return this.localInvoiceRows.forEach((t,i)=>{const s=t.invoiceType||t.invoiceTypeName||"å…¶ä»–";if(n.has(s)){const t=n.get(s);e.get(t).rowspan+=1,e.set(i,{rowspan:0,colspan:0})}else n.set(s,i),e.set(i,{rowspan:1,colspan:1})}),e},firstDimensionSpanMap(){const e=new Map;if(0===(this.splitConfig&&this.splitConfig.dimensions?this.splitConfig.dimensions:[]).length)return e;const n={};return this.localInvoiceRows.forEach((e,t)=>{const i=e.invoiceType||e.invoiceTypeName||"å…¶ä»–";n[i]||(n[i]=[]),n[i].push({row:e,index:t})}),Object.keys(n).forEach(t=>{const i=n[t],s=new Map;i.forEach(({row:n,index:t})=>{const i=n.splitDimension1||n.businessLine||n.legalEntity||"å…¶ä»–";if(s.has(i)){const n=s.get(i);e.get(n).rowspan+=1,e.set(t,{rowspan:0,colspan:0})}else s.set(i,t),e.set(t,{rowspan:1,colspan:1})})}),e}},watch:{invoiceRows:{immediate:!0,deep:!0,handler(e){e&&e.length>0&&(console.log("InvoiceForm - invoiceRows å˜åŒ–:",e),this.localInvoiceRows=e.map((e,n)=>{const t={...e};if(!t.invoiceType&&t.invoiceTypeName&&(t.invoiceType=t.invoiceTypeName),!t.invoiceTypeName&&t.invoiceType&&(t.invoiceTypeName=t.invoiceType),t.invoiceType||t.invoiceTypeName||(t.invoiceType="å¢å€¼ç¨æ™®é€šå‘ç¥¨",t.invoiceTypeName="å¢å€¼ç¨æ™®é€šå‘ç¥¨"),!t.summary&&t.invoiceSummary&&(t.summary=t.invoiceSummary),!t.invoiceSummary&&t.summary&&(t.invoiceSummary=t.summary),t.summary||t.invoiceSummary||(t.summary="å…¨éƒ¨è®¢å•",t.invoiceSummary="å…¨éƒ¨è®¢å•"),!t.splitDimension1&&t.businessLine&&(t.splitDimension1=t.businessLine),!t.splitDimension2&&t.legalEntity&&(t.splitDimension2=t.legalEntity),!t.businessLine&&t.splitDimension1&&(t.businessLine=t.splitDimension1),!t.legalEntity&&t.splitDimension2&&(t.legalEntity=t.splitDimension2),t.invoiceTitle&&"object"==typeof t.invoiceTitle&&(t.titleId=t.invoiceTitle.titleId||t.titleId||"",t.titleName=t.invoiceTitle.titleName||t.titleName||"",t.taxNumber=t.invoiceTitle.taxNumber||t.taxNumber||""),!t.titleId&&this.titles&&this.titles.length>0){const e=this.titles.find(e=>e.isDefault)||this.titles[0];e&&(t.titleId=e.titleId,t.titleName=e.titleName,t.taxNumber=e.taxNumber)}return t.recipient&&"object"==typeof t.recipient&&(t.receiverId=t.recipient.id||t.receiverId||"",t.receiverName=t.recipient.name||t.receiverName||"",t.receiverPhone=t.recipient.phone||t.receiverPhone||"",t.receiverEmail=t.recipient.email||t.receiverEmail||"",t.receiverAddress=t.recipient.address||t.receiverAddress||""),void 0===t.unit&&(t.unit="/"),void 0===t.quantity&&(t.quantity=""),void 0===t.remark&&(t.remark=""),void 0===t.receiverEmail&&(t.receiverEmail=""),t.orderCount||(t.orderCount=0),void 0===t.isValid&&(t.isValid=!1),void 0!==t.amount&&null!==t.amount||(t.amount=0),t.id||(t.id="invoice_row_"+n),t}),console.log("InvoiceForm - localInvoiceRows å¤„ç†å:",this.localInvoiceRows))}}},methods:{formatAmount:e=>Object(a.a)(e),validatePhone:e=>!!e&&Object(l.b)(e),validateEmail:e=>!!e&&Object(l.a)(e),validateQuantity:e=>!!e&&(e>=1&&e<=99999),getDimensionLabel(e){const{SPLIT_DIMENSION_NAMES:n}=t(0);return n[e]||e},handleSpanMethod({row:e,column:n,rowIndex:t,columnIndex:i}){const s=(this.splitConfig&&this.splitConfig.dimensions?this.splitConfig.dimensions:[]).length;if(0===i){const e=this.invoiceTypeSpanMap.get(t);if(e)return e}if(1===i&&s>1){const e=this.firstDimensionSpanMap.get(t);if(e)return e}return{rowspan:1,colspan:1}},formatReceiverLabel:e=>`${e.name} - ${e.phone}`,handleQuantityChange(e){const n=""===e.quantity||null===e.quantity||void 0===e.quantity?"":Number(e.quantity);""!==n&&(isNaN(n)||n<1?e.quantity="":e.quantity=n>99999?99999:n),console.log("æ•°é‡æ”¹å˜:",e)},handleSplit(e){console.log("æ‹†åˆ†:",e),this.$message.info("æ‹†åˆ†åŠŸèƒ½å¼€å‘ä¸­")},handleAddTitle(){console.log("æ–°å¢å‘ç¥¨æŠ¬å¤´"),this.$message.info("æ–°å¢å‘ç¥¨æŠ¬å¤´åŠŸèƒ½å¼€å‘ä¸­")},handleTitleDetail(e){console.log("æŸ¥çœ‹æŠ¬å¤´è¯¦æƒ…:",e),this.$message.info("æŠ¬å¤´è¯¦æƒ…åŠŸèƒ½å¼€å‘ä¸­")},handleTitleChange(e,n){const t=this.titles.find(e=>e.titleId===n);t&&(e.titleId=t.titleId,e.titleName=t.titleName,e.taxNumber=t.taxNumber),console.log("å‘ç¥¨æŠ¬å¤´æ”¹å˜:",e)},handleReceiverChange(e){const n=this.receivers.find(n=>n.id===e.receiverId);n&&(e.receiverId=n.id,e.receiverName=n.name,e.receiverPhone=n.phone,e.receiverEmail=n.email,e.receiverAddress=n.address),console.log("æ”¶è´§äººæ”¹å˜:",e)},validateRow(e){return e.invoiceType?!e.amount||e.amount<=0?(this.$message.warning("å¼€ç¥¨é‡‘é¢å¿…é¡»å¤§äº0"),!1):e.titleId?e.receiverId?!(""!==e.quantity&&null!==e.quantity&&void 0!==e.quantity&&e.quantity<1)||(this.$message.warning("æ•°é‡å¿…é¡»å¤§äºç­‰äº1"),!1):(this.$message.warning("è¯·é€‰æ‹©æ”¶è´§äºº"),!1):(this.$message.warning("è¯·é€‰æ‹©å‘ç¥¨æŠ¬å¤´"),!1):(this.$message.warning("è¯·é€‰æ‹©å‘ç¥¨ç§ç±»"),!1)},handleCancel(){this.$emit("cancel")},handleSubmit(){for(let e of this.localInvoiceRows)if(!this.validateRow(e))return;this.$emit("submit",this.localInvoiceRows)}}},c=(t(338),Object(s.a)(r,(function(){var e=this,n=e._self._c;return n("div",{staticClass:"invoice-form"},[e.hasGrouping?n("div",{staticClass:"group-hint"},[n("i",{staticClass:"el-icon-info"}),e._v(" "),n("span",[e._v("å¼€ç¥¨ä¿¡æ¯å·²æŒ‰ "),n("strong",[e._v(e._s(e.groupingDescription))]),e._v(" æ‹†åˆ†å±•ç¤º")])]):e._e(),e._v(" "),n("el-table",{staticClass:"invoice-table",staticStyle:{width:"100%"},attrs:{data:e.localInvoiceRows,border:"","span-method":e.handleSpanMethod}},[n("el-table-column",{attrs:{prop:"invoiceType",label:"å‘ç¥¨ç§ç±»",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function({row:n}){return[e._v("\n        "+e._s(n.invoiceType||n.invoiceTypeName||"-")+"\n      ")]}}])}),e._v(" "),e._l(e.splitConfig.dimensions||[],(function(t,i){return n("el-table-column",{key:"split_dim_"+i,attrs:{label:e.getDimensionLabel(t),width:"120"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[0===i?n("span",[e._v("\n          "+e._s(t.splitDimension1||t.businessLine||"-")+"\n        ")]):1===i?n("span",[e._v("\n          "+e._s(t.splitDimension2||t.legalEntity||"-")+"\n        ")]):e._e()]}}],null,!0)})})),e._v(" "),n("el-table-column",{attrs:{prop:"summary",label:"å‘ç¥¨æ‘˜è¦",width:"180"},scopedSlots:e._u([{key:"default",fn:function({row:n}){return[e._v("\n        "+e._s(n.summary||n.invoiceSummary||"-")+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"amount",label:"å¼€ç¥¨é‡‘é¢(CNY)",width:"150",align:"right"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[n("div",{staticClass:"amount-cell"},[n("span",[e._v(e._s(e.formatAmount(t.amount)))]),e._v(" "),n("el-link",{staticClass:"split-link",attrs:{type:"primary",underline:!1},on:{click:function(n){return e.handleSplit(t)}}},[e._v("\n            æ‹†åˆ†\n          ")])],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"å‘ç¥¨æŠ¬å¤´",width:"250"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[n("div",{staticClass:"title-cell"},[n("invoice-title-selector",{attrs:{titles:e.titles,size:"small"},on:{change:function(n){return e.handleTitleChange(t,n)}},model:{value:t.titleId,callback:function(n){e.$set(t,"titleId",n)},expression:"row.titleId"}}),e._v(" "),n("div",{staticClass:"title-actions"},[n("el-link",{staticClass:"action-link",attrs:{type:"primary",underline:!1},on:{click:e.handleAddTitle}},[e._v("\n              æ–°å¢å‘ç¥¨æŠ¬å¤´>\n            ")]),e._v(" "),n("el-link",{staticClass:"action-link",attrs:{type:"primary",underline:!1},on:{click:function(n){return e.handleTitleDetail(t)}}},[e._v("\n              æŠ¬å¤´è¯¦æƒ…\n            ")])],1)],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"æ”¶è´§äººä¿¡æ¯",width:"200"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[n("el-select",{attrs:{placeholder:"è¯·é€‰æ‹©æ”¶è´§äºº",size:"small"},on:{change:function(n){return e.handleReceiverChange(t)}},model:{value:t.receiverId,callback:function(n){e.$set(t,"receiverId",n)},expression:"row.receiverId"}},e._l(e.receivers,(function(t){return n("el-option",{key:t.id,attrs:{label:e.formatReceiverLabel(t),value:t.id}},[n("div",{staticClass:"receiver-option"},[n("div",[e._v(e._s(t.name)+" "+e._s(t.phone))]),e._v(" "),n("div",{staticClass:"receiver-email"},[e._v(e._s(t.email))])])])})),1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"å•ä½",width:"100"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[n("el-select",{attrs:{placeholder:"è¯·é€‰æ‹©",size:"small"},model:{value:t.unit,callback:function(n){e.$set(t,"unit",n)},expression:"row.unit"}},[n("el-option",{attrs:{label:"/",value:"/"}}),e._v(" "),n("el-option",{attrs:{label:"æ¬¡",value:"æ¬¡"}}),e._v(" "),n("el-option",{attrs:{label:"å¤©",value:"å¤©"}}),e._v(" "),n("el-option",{attrs:{label:"ä¸ª",value:"ä¸ª"}}),e._v(" "),n("el-option",{attrs:{label:"äºº",value:"äºº"}}),e._v(" "),n("el-option",{attrs:{label:"é—´å¤œ",value:"é—´å¤œ"}}),e._v(" "),n("el-option",{attrs:{label:"é—´",value:"é—´"}}),e._v(" "),n("el-option",{attrs:{label:"æ‰¹",value:"æ‰¹"}})],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"æ•°é‡",width:"100"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[n("el-input",{attrs:{type:"number",placeholder:"è¯·è¾“å…¥æ•°é‡",size:"small",min:1,max:99999},on:{change:function(n){return e.handleQuantityChange(t)}},model:{value:t.quantity,callback:function(n){e.$set(t,"quantity",n)},expression:"row.quantity"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"æ”¶ä»¶é‚®ç®±",width:"200"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[n("el-input",{attrs:{placeholder:"è¯·è¾“å…¥æ”¶ä»¶é‚®ç®±",size:"small"},model:{value:t.receiverEmail,callback:function(n){e.$set(t,"receiverEmail",n)},expression:"row.receiverEmail"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"å‘ç¥¨å¤‡æ³¨",width:"200"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[n("el-input",{attrs:{type:"textarea",rows:2,placeholder:"è¯·è¾“å…¥å¤‡æ³¨",size:"small"},model:{value:t.remark,callback:function(n){e.$set(t,"remark",n)},expression:"row.remark"}})]}}])})],2),e._v(" "),n("div",{staticClass:"form-footer"},[n("el-button",{on:{click:e.handleCancel}},[e._v("å–æ¶ˆ")]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.submitting},on:{click:e.handleSubmit}},[e._v("æäº¤å¼€ç¥¨")])],1)],1)}),[],!1,null,"b803b332",null));n.a=c.exports},316:function(e,n,t){"use strict";var i=t(0),s={name:"InvoiceSplitConfig",props:{value:{type:Boolean,default:!1},currentConfig:{type:Object,default:()=>({dimension1:"",dimension2:""})}},data(){return{visible:this.value,saving:!1,form:{dimension1:"",dimension2:""},dimensionOptions:[{label:"ä¸šåŠ¡çº¿",value:i.SPLIT_DIMENSION.BUSINESS_LINE,disabled:!1},{label:"æ³•äººå®ä½“",value:i.SPLIT_DIMENSION.LEGAL_ENTITY,disabled:!1},{label:"æ”¯ä»˜è´¦æˆ·",value:i.SPLIT_DIMENSION.PAYMENT_ACCOUNT,disabled:!1},{label:"éƒ¨é—¨",value:i.SPLIT_DIMENSION.DEPARTMENT,disabled:!1},{label:"å‡ºè¡Œäºº",value:i.SPLIT_DIMENSION.TRAVELER,disabled:!1},{label:"æœ€åŸå§‹è®¢å•å·",value:i.SPLIT_DIMENSION.ORIGINAL_ORDER_NO,disabled:!0}],rules:{dimension1:[{required:!0,message:"è¯·é€‰æ‹©ç¬¬ä¸€ä¸ªæ‹†åˆ†ç»´åº¦",trigger:"change"}],dimension2:[{validator:this.validateDimension2,trigger:"change"}]}}},watch:{value(e){this.visible=e,e&&this.initForm()},visible(e){this.$emit("input",e)}},methods:{initForm(){this.form={dimension1:this.currentConfig.dimension1||"",dimension2:this.currentConfig.dimension2||""},this.$nextTick(()=>{this.$refs.splitForm&&this.$refs.splitForm.clearValidate()})},handleDimensionChange(){this.$nextTick(()=>{this.$refs.splitForm&&this.$refs.splitForm.validateField("dimension2")})},validateDimension2(e,n,t){n&&n===this.form.dimension1?t(new Error("å­—æ®µä¸èƒ½é‡å¤")):t()},getDimensionLabel(e){const n=this.dimensionOptions.find(n=>n.value===e);return n?n.label:e},handleClose(){this.visible=!1},async handleSave(){try{await this.$refs.splitForm.validate()}catch(e){return}this.saving=!0;try{const e={dimension1:this.form.dimension1,dimension2:this.form.dimension2||""};this.$emit("save",e),this.$message.success("æ‹†åˆ†æ±‡æ€»é…ç½®ä¿å­˜æˆåŠŸ"),this.visible=!1}catch(e){this.$message.error(e.message||"ä¿å­˜é…ç½®å¤±è´¥")}finally{this.saving=!1}}}},o=(t(340),t(12)),a=Object(o.a)(s,(function(){var e=this,n=e._self._c;return n("el-dialog",{attrs:{title:"æ‹†åˆ†æ±‡æ€»é…ç½®",visible:e.visible,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(n){e.visible=n},close:e.handleClose}},[n("div",{staticClass:"split-config-content"},[n("p",{staticClass:"config-description"},[n("i",{staticClass:"el-icon-info"}),e._v("\n      é…ç½®æ‹†åˆ†ç»´åº¦åï¼Œå¼€ç¥¨ä¿¡æ¯è¡¨å°†æŒ‰ç…§é€‰å®šçš„ç»´åº¦è¿›è¡Œåˆ†ç»„å±•ç¤º\n    ")]),e._v(" "),n("el-form",{ref:"splitForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"å­—æ®µä¸€",prop:"dimension1"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"è¯·é€‰æ‹©ç¬¬ä¸€ä¸ªæ‹†åˆ†ç»´åº¦"},on:{change:e.handleDimensionChange},model:{value:e.form.dimension1,callback:function(n){e.$set(e.form,"dimension1",n)},expression:"form.dimension1"}},e._l(e.dimensionOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value,disabled:t.disabled||t.value===e.form.dimension2}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"å­—æ®µäºŒ",prop:"dimension2"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"è¯·é€‰æ‹©ç¬¬äºŒä¸ªæ‹†åˆ†ç»´åº¦ï¼ˆå¯é€‰ï¼‰",clearable:""},on:{change:e.handleDimensionChange},model:{value:e.form.dimension2,callback:function(n){e.$set(e.form,"dimension2",n)},expression:"form.dimension2"}},e._l(e.dimensionOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value,disabled:t.disabled||t.value===e.form.dimension1}})})),1)],1),e._v(" "),e.form.dimension1?n("div",{staticClass:"config-preview"},[n("div",{staticClass:"preview-title"},[e._v("é¢„è§ˆæ•ˆæœ")]),e._v(" "),n("div",{staticClass:"preview-content"},[n("div",{staticClass:"preview-item"},[n("i",{staticClass:"el-icon-folder-opened"}),e._v(" "),n("span",[e._v(e._s(e.getDimensionLabel(e.form.dimension1)))]),e._v(" "),e.form.dimension2?[n("i",{staticClass:"el-icon-right"}),e._v(" "),n("i",{staticClass:"el-icon-folder-opened"}),e._v(" "),n("span",[e._v(e._s(e.getDimensionLabel(e.form.dimension2)))])]:e._e()],2),e._v(" "),n("p",{staticClass:"preview-hint"},[e._v("\n            å¼€ç¥¨ä¿¡æ¯å°†æŒ‰ç…§ "),n("strong",[e._v(e._s(e.getDimensionLabel(e.form.dimension1)))]),e._v(" "),e.form.dimension2?[e._v("\n              â†’ "),n("strong",[e._v(e._s(e.getDimensionLabel(e.form.dimension2)))])]:e._e(),e._v("\n            è¿›è¡Œåˆ†ç»„å±•ç¤º\n          ")],2)])]):e._e()],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleClose}},[e._v("å–æ¶ˆ")]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.saving},on:{click:e.handleSave}},[e._v("ä¿å­˜é…ç½®")])],1)])}),[],!1,null,"c357f4e2",null);n.a=a.exports},317:function(e,n,t){var i={"./af":163,"./af.js":163,"./ar":164,"./ar-dz":165,"./ar-dz.js":165,"./ar-kw":166,"./ar-kw.js":166,"./ar-ly":167,"./ar-ly.js":167,"./ar-ma":168,"./ar-ma.js":168,"./ar-ps":169,"./ar-ps.js":169,"./ar-sa":170,"./ar-sa.js":170,"./ar-tn":171,"./ar-tn.js":171,"./ar.js":164,"./az":172,"./az.js":172,"./be":173,"./be.js":173,"./bg":174,"./bg.js":174,"./bm":175,"./bm.js":175,"./bn":176,"./bn-bd":177,"./bn-bd.js":177,"./bn.js":176,"./bo":178,"./bo.js":178,"./br":179,"./br.js":179,"./bs":180,"./bs.js":180,"./ca":181,"./ca.js":181,"./cs":182,"./cs.js":182,"./cv":183,"./cv.js":183,"./cy":184,"./cy.js":184,"./da":185,"./da.js":185,"./de":186,"./de-at":187,"./de-at.js":187,"./de-ch":188,"./de-ch.js":188,"./de.js":186,"./dv":189,"./dv.js":189,"./el":190,"./el.js":190,"./en-au":191,"./en-au.js":191,"./en-ca":192,"./en-ca.js":192,"./en-gb":193,"./en-gb.js":193,"./en-ie":194,"./en-ie.js":194,"./en-il":195,"./en-il.js":195,"./en-in":196,"./en-in.js":196,"./en-nz":197,"./en-nz.js":197,"./en-sg":198,"./en-sg.js":198,"./eo":199,"./eo.js":199,"./es":200,"./es-do":201,"./es-do.js":201,"./es-mx":202,"./es-mx.js":202,"./es-us":203,"./es-us.js":203,"./es.js":200,"./et":204,"./et.js":204,"./eu":205,"./eu.js":205,"./fa":206,"./fa.js":206,"./fi":207,"./fi.js":207,"./fil":208,"./fil.js":208,"./fo":209,"./fo.js":209,"./fr":210,"./fr-ca":211,"./fr-ca.js":211,"./fr-ch":212,"./fr-ch.js":212,"./fr.js":210,"./fy":213,"./fy.js":213,"./ga":214,"./ga.js":214,"./gd":215,"./gd.js":215,"./gl":216,"./gl.js":216,"./gom-deva":217,"./gom-deva.js":217,"./gom-latn":218,"./gom-latn.js":218,"./gu":219,"./gu.js":219,"./he":220,"./he.js":220,"./hi":221,"./hi.js":221,"./hr":222,"./hr.js":222,"./hu":223,"./hu.js":223,"./hy-am":224,"./hy-am.js":224,"./id":225,"./id.js":225,"./is":226,"./is.js":226,"./it":227,"./it-ch":228,"./it-ch.js":228,"./it.js":227,"./ja":229,"./ja.js":229,"./jv":230,"./jv.js":230,"./ka":231,"./ka.js":231,"./kk":232,"./kk.js":232,"./km":233,"./km.js":233,"./kn":234,"./kn.js":234,"./ko":235,"./ko.js":235,"./ku":236,"./ku-kmr":237,"./ku-kmr.js":237,"./ku.js":236,"./ky":238,"./ky.js":238,"./lb":239,"./lb.js":239,"./lo":240,"./lo.js":240,"./lt":241,"./lt.js":241,"./lv":242,"./lv.js":242,"./me":243,"./me.js":243,"./mi":244,"./mi.js":244,"./mk":245,"./mk.js":245,"./ml":246,"./ml.js":246,"./mn":247,"./mn.js":247,"./mr":248,"./mr.js":248,"./ms":249,"./ms-my":250,"./ms-my.js":250,"./ms.js":249,"./mt":251,"./mt.js":251,"./my":252,"./my.js":252,"./nb":253,"./nb.js":253,"./ne":254,"./ne.js":254,"./nl":255,"./nl-be":256,"./nl-be.js":256,"./nl.js":255,"./nn":257,"./nn.js":257,"./oc-lnc":258,"./oc-lnc.js":258,"./pa-in":259,"./pa-in.js":259,"./pl":260,"./pl.js":260,"./pt":261,"./pt-br":262,"./pt-br.js":262,"./pt.js":261,"./ro":263,"./ro.js":263,"./ru":264,"./ru.js":264,"./sd":265,"./sd.js":265,"./se":266,"./se.js":266,"./si":267,"./si.js":267,"./sk":268,"./sk.js":268,"./sl":269,"./sl.js":269,"./sq":270,"./sq.js":270,"./sr":271,"./sr-cyrl":272,"./sr-cyrl.js":272,"./sr.js":271,"./ss":273,"./ss.js":273,"./sv":274,"./sv.js":274,"./sw":275,"./sw.js":275,"./ta":276,"./ta.js":276,"./te":277,"./te.js":277,"./tet":278,"./tet.js":278,"./tg":279,"./tg.js":279,"./th":280,"./th.js":280,"./tk":281,"./tk.js":281,"./tl-ph":282,"./tl-ph.js":282,"./tlh":283,"./tlh.js":283,"./tr":284,"./tr.js":284,"./tzl":285,"./tzl.js":285,"./tzm":286,"./tzm-latn":287,"./tzm-latn.js":287,"./tzm.js":286,"./ug-cn":288,"./ug-cn.js":288,"./uk":289,"./uk.js":289,"./ur":290,"./ur.js":290,"./uz":291,"./uz-latn":292,"./uz-latn.js":292,"./uz.js":291,"./vi":293,"./vi.js":293,"./x-pseudo":294,"./x-pseudo.js":294,"./yo":295,"./yo.js":295,"./zh-cn":296,"./zh-cn.js":296,"./zh-hk":297,"./zh-hk.js":297,"./zh-mo":298,"./zh-mo.js":298,"./zh-tw":299,"./zh-tw.js":299};function s(e){var n=o(e);return t(n)}function o(e){if(!t.o(i,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=o,e.exports=s,s.id=317},336:function(e,n,t){"use strict";t(310)},337:function(e,n,t){(n=t(19)(!1)).push([e.i,".title-option .title-main[data-v-0b12f5d4] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 4px;\n}\n.title-option .title-main .title-name[data-v-0b12f5d4] {\n  font-weight: 600;\n  color: #303133;\n}\n.title-option .title-info[data-v-0b12f5d4] {\n  font-size: 13px;\n  color: #909399;\n}\n",""]),e.exports=n},338:function(e,n,t){"use strict";t(311)},339:function(e,n,t){(n=t(19)(!1)).push([e.i,".invoice-form .group-hint[data-v-b803b332] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 16px;\n  padding: 16px;\n  background: #f5f7fa;\n  border-radius: 4px;\n  color: #909399;\n  font-size: 14px;\n}\n.invoice-form .group-hint i[data-v-b803b332] {\n  color: #2555FF;\n  font-size: 18px;\n  flex-shrink: 0;\n}\n.invoice-form .group-hint strong[data-v-b803b332] {\n  color: #2555FF;\n}\n.invoice-form .invoice-table[data-v-b803b332] {\n  margin-bottom: 24px;\n}\n.invoice-form .invoice-table .amount-cell[data-v-b803b332] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.invoice-form .invoice-table .amount-cell .split-link[data-v-b803b332] {\n  font-size: 12px;\n}\n.invoice-form .invoice-table .title-cell .title-actions[data-v-b803b332] {\n  display: flex;\n  gap: 8px;\n  margin-top: 4px;\n}\n.invoice-form .invoice-table .title-cell .title-actions .action-link[data-v-b803b332] {\n  font-size: 12px;\n}\n.invoice-form .invoice-table .receiver-option .receiver-email[data-v-b803b332] {\n  font-size: 12px;\n  color: #909399;\n}\n.invoice-form .form-footer[data-v-b803b332] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 16px;\n  padding-top: 16px;\n  border-top: 1px solid #dcdfe6;\n}\n",""]),e.exports=n},340:function(e,n,t){"use strict";t(312)},341:function(e,n,t){(n=t(19)(!1)).push([e.i,".split-config-content .config-description[data-v-c357f4e2] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 16px;\n  background: #f5f7fa;\n  border-radius: 4px;\n  color: #909399;\n  font-size: 14px;\n  margin-bottom: 24px;\n}\n.split-config-content .config-description i[data-v-c357f4e2] {\n  color: #2555FF;\n  font-size: 18px;\n}\n.split-config-content .config-preview[data-v-c357f4e2] {\n  margin-top: 24px;\n  padding: 16px;\n  background: #E8EEFF;\n  border: 1px solid #B3C5FF;\n  border-radius: 4px;\n}\n.split-config-content .config-preview .preview-title[data-v-c357f4e2] {\n  font-size: 13px;\n  color: #909399;\n  margin-bottom: 8px;\n}\n.split-config-content .config-preview .preview-content .preview-item[data-v-c357f4e2] {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 8px 0;\n  font-size: 14px;\n  color: #303133;\n}\n.split-config-content .config-preview .preview-content .preview-item i[data-v-c357f4e2] {\n  color: #2555FF;\n  font-size: 16px;\n}\n.split-config-content .config-preview .preview-content .preview-item span[data-v-c357f4e2] {\n  font-weight: 500;\n}\n.split-config-content .config-preview .preview-content .preview-hint[data-v-c357f4e2] {\n  margin: 8px 0 0;\n  padding-top: 8px;\n  border-top: 1px dashed #B3C5FF;\n  font-size: 13px;\n  color: #909399;\n  line-height: 1.6;\n}\n.split-config-content .config-preview .preview-content .preview-hint strong[data-v-c357f4e2] {\n  color: #2555FF;\n  font-weight: 600;\n}\n",""]),e.exports=n}}]);