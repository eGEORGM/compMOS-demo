(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{160:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return r}));var i=n(159),s=n.n(i);function a(e,t=2,n="Â¥"){if(null==e||isNaN(e))return n+"0.00";const i=Number(e).toFixed(t).split(".");return n+i[0].replace(/\B(?=(\d{3})+(?!\d))/g,",")+(i[1]?"."+i[1]:"")}function o(e,t="YYYY-MM-DD"){return e?s()(e).format(t):"-"}function l(e,t){if(!e)return"-";if(t&&t.startDate&&t.endDate)return r(t.startDate,t.endDate);const[n,i]=e.split("-");return`${n}å¹´${parseInt(i)}æœˆ`}function r(e,t){if(!e||!t)return"-";return`${o(e,"YYYYå¹´MæœˆDæ—¥")} è‡³ ${o(t,"YYYYå¹´MæœˆDæ—¥")}`}},161:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return d}));var i=n(60);const s={1e3:"æ“ä½œå¤±è´¥",1001:"å‚æ•°é”™è¯¯",1002:"æ•°æ®ä¸å­˜åœ¨",1003:"æ•°æ®å·²å­˜åœ¨",1004:"æ“ä½œè¢«æ‹’ç»",1005:"æ“ä½œè¶…æ—¶",10001:"è´¦å•ä¸å­˜åœ¨",10002:"è´¦å•çŠ¶æ€ä¸å…è®¸æ­¤æ“ä½œ",10003:"è´¦å•ç¡®è®¤å¤±è´¥ï¼Œè¯·æ£€æŸ¥è®¢å•æ•°æ®",10004:"è´¦å•å·²è¿›å…¥å¼€ç¥¨æµç¨‹ï¼Œæ— æ³•æ’¤é”€ç¡®è®¤",10005:"è´¦å•åŒ…å«æœªæ ¸å¯¹è®¢å•ï¼Œæ— æ³•ç¡®è®¤",10006:"è´¦å•å·²ç¡®è®¤ï¼Œæ— æ³•ä¿®æ”¹",10007:"è´¦å•å°šæœªç¡®è®¤ï¼Œæ— æ³•å¼€ç¥¨",10008:"è´¦å•å¯¼å‡ºå¤±è´¥",20001:"å¼€ç¥¨ç”³è¯·å¤±è´¥",20002:"å‘ç¥¨æŠ¬å¤´ä¿¡æ¯ä¸å®Œæ•´",20003:"å¼€ç¥¨é‡‘é¢è¶…è¿‡å¯å¼€ç¥¨é‡‘é¢",20004:"å‘ç¥¨ç§ç±»ä¸æ”¯æŒ",20005:"å‘ç¥¨ä¸å­˜åœ¨",20006:"å‘ç¥¨å·²çº¢å†²ï¼Œæ— æ³•å†æ¬¡æ“ä½œ",20007:"å‘ç¥¨ä¸‹è½½å¤±è´¥",20008:"çº¢å†²å¤±è´¥ï¼Œè¯·è”ç³»å®¢æœ",20009:"æ¢å¼€å¤±è´¥ï¼Œè¯·æ£€æŸ¥å‘ç¥¨æŠ¬å¤´ä¿¡æ¯",20010:"å‘ç¥¨æŠ¬å¤´å·²å­˜åœ¨",20011:"å‘ç¥¨æ•°é‡è¶…è¿‡é™åˆ¶",30001:"è®¢å•ä¸å­˜åœ¨",30002:"è®¢å•çŠ¶æ€å¼‚å¸¸",30003:"è®¢å•å·²æ ¸å¯¹ï¼Œæ— æ³•ä¿®æ”¹",30004:"è®¢å•æ‰¹é‡æ“ä½œå¤±è´¥",30005:"è®¢å•è°ƒè´¦å¤±è´¥",40001:"é…ç½®ä¿å­˜å¤±è´¥",40002:"PDFå­—æ®µè¶…è¿‡20ä¸ªé™åˆ¶",40003:"æ˜ç»†è®¾ç½®ä¿å­˜å¤±è´¥",40004:"å­—æ®µé…ç½®æ— æ•ˆ",40005:"æ‹†åˆ†ç»´åº¦é‡å¤",50001:"æ— è®¿é—®æƒé™",50002:"æ“ä½œæƒé™ä¸è¶³",50003:"ä¼ä¸šæœªæˆæƒ",50004:"åŠŸèƒ½æœªå¼€æ”¾",90001:"ç½‘ç»œè¿æ¥å¤±è´¥",90002:"è¯·æ±‚è¶…æ—¶",90003:"æœåŠ¡ä¸å¯ç”¨",90004:"æœåŠ¡å™¨é”™è¯¯"},a={400:"è¯·æ±‚å‚æ•°é”™è¯¯",401:"æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½•",403:"æ‹’ç»è®¿é—®",404:"è¯·æ±‚åœ°å€ä¸å­˜åœ¨",408:"è¯·æ±‚è¶…æ—¶",500:"æœåŠ¡å™¨å†…éƒ¨é”™è¯¯",502:"ç½‘å…³é”™è¯¯",503:"æœåŠ¡ä¸å¯ç”¨",504:"ç½‘å…³è¶…æ—¶"},o={INFO:"info",WARN:"warn",ERROR:"error",FATAL:"fatal"};function l(e,t="æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"){return s[e]||a[e]||t}function r(e,t={}){const{silent:n=!1,showConfirm:s=!1,customMessage:a=null,onError:r=null}=t,c=function(e){const t={code:null,message:"æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•",level:o.ERROR,details:null,timestamp:(new Date).toISOString()};if(e.response){const{status:n,data:i}=e.response;t.code=i.code||n,t.message=l(t.code,i.message),t.details={status:n,url:e.config&&e.config.url,method:e.config&&e.config.method,data:i},n>=500?t.level=o.FATAL:n>=400&&(t.level=o.ERROR)}else e.request?(t.code=90001,t.message="ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ",t.level=o.WARN,t.details={url:e.config&&e.config.url,timeout:e.config&&e.config.timeout}):(t.message=e.message||"æœªçŸ¥é”™è¯¯",t.details={stack:e.stack});return t}(e);if(function(e){const{level:t,message:n,code:i,details:s,timestamp:a}=e,l=`[${a}] [${t.toUpperCase()}] Code: ${i}, Message: ${n}`;switch(t){case o.INFO:console.info(l,s);break;case o.WARN:console.warn(l,s);break;case o.ERROR:console.error(l,s);break;case o.FATAL:console.error("ğŸ’¥",l,s);break;default:console.log(l,s)}1}(c),r&&"function"==typeof r&&r(c),n)return c;const d=a||c.message;return s?i.MessageBox.alert(d,"é”™è¯¯",{type:"error",confirmButtonText:"ç¡®å®š"}):Object(i.Message)({message:d,type:"error",duration:5e3,showClose:!0}),c}function c(e,t=3e3){Object(i.Message)({message:e,type:"success",duration:t,showClose:!0})}function d(e,t=3e3){Object(i.Message)({message:e,type:"warning",duration:t,showClose:!0})}},306:function(e,t,n){"use strict";function i(e){if(!e)return!1;const t=e.replace(/\s/g,"");return/^[A-Z0-9]{15}$|^[A-Z0-9]{18}$|^[A-Z0-9]{20}$/.test(t)}n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}));function s(e){if(!e)return!1;return/^1[3-9]\d{9}$/.test(e)}function a(e){if(!e)return!1;return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)}},309:function(e,t,n){var i=n(18),s=n(334);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var a={insert:"head",singleton:!1};i(s,a);e.exports=s.locals||{}},310:function(e,t,n){var i=n(18),s=n(336);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var a={insert:"head",singleton:!1};i(s,a);e.exports=s.locals||{}},311:function(e,t,n){var i=n(18),s=n(338);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var a={insert:"head",singleton:!1};i(s,a);e.exports=s.locals||{}},314:function(e,t,n){"use strict";var i={name:"InvoiceTitleSelector",props:{value:{type:String,default:""},titles:{type:Array,default:()=>[]},size:{type:String,default:"medium"}},methods:{formatTitleLabel:e=>`${e.titleName} (${e.taxNumber})`,handleChange(e){const t=this.titles.find(t=>t.titleId===e);this.$emit("input",e),this.$emit("change",t)}}},s=(n(333),n(12)),a=Object(s.a)(i,(function(){var e=this,t=e._self._c;return t("el-select",{attrs:{value:e.value,placeholder:"è¯·é€‰æ‹©å‘ç¥¨æŠ¬å¤´",size:e.size},on:{change:e.handleChange}},e._l(e.titles,(function(n){return t("el-option",{key:n.titleId,attrs:{label:e.formatTitleLabel(n),value:n.titleId}},[t("div",{staticClass:"title-option"},[t("div",{staticClass:"title-main"},[t("span",{staticClass:"title-name"},[e._v(e._s(n.titleName))]),e._v(" "),n.isDefault?t("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("é»˜è®¤")]):e._e()],1),e._v(" "),t("div",{staticClass:"title-info"},[e._v("\n        ç¨å·ï¼š"+e._s(n.taxNumber)+"\n      ")])])])})),1)}),[],!1,null,"0b12f5d4",null).exports,o=n(160),l=n(306),r={name:"InvoiceForm",components:{InvoiceTitleSelector:a},props:{invoiceRows:{type:Array,required:!0},splitConfig:{type:Object,default:()=>({dimensions:[]})},titles:{type:Array,default:()=>[]}},watch:{titles:{immediate:!0,handler(e){console.log("InvoiceForm - titles å˜åŒ–:",e)}}},data:()=>({localInvoiceRows:[],submitting:!1,receivers:[{id:"1",name:"å¼ ä¸‰",phone:"13800138000",email:"zhangsan@example.com",address:"åŒ—äº¬å¸‚æµ·æ·€åŒºä¸­å…³æ‘å¤§è¡—1å·"},{id:"2",name:"æå››",phone:"13900139000",email:"lisi@example.com",address:"åŒ—äº¬å¸‚æœé˜³åŒºå»ºå›½è·¯88å·"},{id:"3",name:"ç‹äº”",phone:"13700137000",email:"wangwu@example.com",address:"ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºä¸–çºªå¤§é“1å·"}]}),computed:{hasGrouping(){return this.splitConfig&&this.splitConfig.dimensions&&this.splitConfig.dimensions.length>0},groupingDescription(){if(!this.hasGrouping)return"";const{SPLIT_DIMENSION_NAMES:e}=n(0);return this.splitConfig.dimensions.map(t=>e[t]||t).join(" å’Œ ")},invoiceTypeSpanMap(){const e=new Map,t=new Map;return this.localInvoiceRows.forEach((n,i)=>{const s=n.invoiceType||n.invoiceTypeName||"å…¶ä»–";if(t.has(s)){const n=t.get(s);e.get(n).rowspan+=1,e.set(i,{rowspan:0,colspan:0})}else t.set(s,i),e.set(i,{rowspan:1,colspan:1})}),e},firstDimensionSpanMap(){const e=new Map;if(0===(this.splitConfig&&this.splitConfig.dimensions?this.splitConfig.dimensions:[]).length)return e;const t={};return this.localInvoiceRows.forEach((e,n)=>{const i=e.invoiceType||e.invoiceTypeName||"å…¶ä»–";t[i]||(t[i]=[]),t[i].push({row:e,index:n})}),Object.keys(t).forEach(n=>{const i=t[n],s=new Map;i.forEach(({row:t,index:n})=>{const i=t.splitDimension1||t.businessLine||t.legalEntity||"å…¶ä»–";if(s.has(i)){const t=s.get(i);e.get(t).rowspan+=1,e.set(n,{rowspan:0,colspan:0})}else s.set(i,n),e.set(n,{rowspan:1,colspan:1})})}),e}},watch:{invoiceRows:{immediate:!0,deep:!0,handler(e){e&&e.length>0&&(console.log("InvoiceForm - invoiceRows å˜åŒ–:",e),this.localInvoiceRows=e.map((e,t)=>{const n={...e};if(!n.invoiceType&&n.invoiceTypeName&&(n.invoiceType=n.invoiceTypeName),!n.invoiceTypeName&&n.invoiceType&&(n.invoiceTypeName=n.invoiceType),n.invoiceType||n.invoiceTypeName||(n.invoiceType="å¢å€¼ç¨æ™®é€šå‘ç¥¨",n.invoiceTypeName="å¢å€¼ç¨æ™®é€šå‘ç¥¨"),!n.summary&&n.invoiceSummary&&(n.summary=n.invoiceSummary),!n.invoiceSummary&&n.summary&&(n.invoiceSummary=n.summary),n.summary||n.invoiceSummary||(n.summary="å…¨éƒ¨è®¢å•",n.invoiceSummary="å…¨éƒ¨è®¢å•"),!n.splitDimension1&&n.businessLine&&(n.splitDimension1=n.businessLine),!n.splitDimension2&&n.legalEntity&&(n.splitDimension2=n.legalEntity),!n.businessLine&&n.splitDimension1&&(n.businessLine=n.splitDimension1),!n.legalEntity&&n.splitDimension2&&(n.legalEntity=n.splitDimension2),n.invoiceTitle&&"object"==typeof n.invoiceTitle&&(n.titleId=n.invoiceTitle.titleId||n.titleId||"",n.titleName=n.invoiceTitle.titleName||n.titleName||"",n.taxNumber=n.invoiceTitle.taxNumber||n.taxNumber||""),!n.titleId&&this.titles&&this.titles.length>0){const e=this.titles.find(e=>e.isDefault)||this.titles[0];e&&(n.titleId=e.titleId,n.titleName=e.titleName,n.taxNumber=e.taxNumber)}return n.recipient&&"object"==typeof n.recipient&&(n.receiverId=n.recipient.id||n.receiverId||"",n.receiverName=n.recipient.name||n.receiverName||"",n.receiverPhone=n.recipient.phone||n.receiverPhone||"",n.receiverEmail=n.recipient.email||n.receiverEmail||"",n.receiverAddress=n.recipient.address||n.receiverAddress||""),void 0===n.unit&&(n.unit="/"),void 0===n.quantity&&(n.quantity=""),void 0===n.remark&&(n.remark=""),void 0===n.receiverEmail&&(n.receiverEmail=""),n.orderCount||(n.orderCount=0),void 0===n.isValid&&(n.isValid=!1),void 0!==n.amount&&null!==n.amount||(n.amount=0),n.id||(n.id="invoice_row_"+t),n}),console.log("InvoiceForm - localInvoiceRows å¤„ç†å:",this.localInvoiceRows))}}},methods:{formatAmount:e=>Object(o.a)(e),validatePhone:e=>!!e&&Object(l.b)(e),validateEmail:e=>!!e&&Object(l.a)(e),validateQuantity:e=>!!e&&(e>=1&&e<=99999),getDimensionLabel(e){const{SPLIT_DIMENSION_NAMES:t}=n(0);return t[e]||e},handleSpanMethod({row:e,column:t,rowIndex:n,columnIndex:i}){const s=(this.splitConfig&&this.splitConfig.dimensions?this.splitConfig.dimensions:[]).length;if(0===i){const e=this.invoiceTypeSpanMap.get(n);if(e)return e}if(1===i&&s>1){const e=this.firstDimensionSpanMap.get(n);if(e)return e}return{rowspan:1,colspan:1}},formatReceiverLabel:e=>`${e.name} - ${e.phone}`,handleQuantityChange(e){const t=""===e.quantity||null===e.quantity||void 0===e.quantity?"":Number(e.quantity);""!==t&&(isNaN(t)||t<1?e.quantity="":e.quantity=t>99999?99999:t),console.log("æ•°é‡æ”¹å˜:",e)},handleSplit(e){console.log("æ‹†åˆ†:",e),this.$message.info("æ‹†åˆ†åŠŸèƒ½å¼€å‘ä¸­")},handleAddTitle(){console.log("æ–°å¢å‘ç¥¨æŠ¬å¤´"),this.$message.info("æ–°å¢å‘ç¥¨æŠ¬å¤´åŠŸèƒ½å¼€å‘ä¸­")},handleTitleDetail(e){console.log("æŸ¥çœ‹æŠ¬å¤´è¯¦æƒ…:",e),this.$message.info("æŠ¬å¤´è¯¦æƒ…åŠŸèƒ½å¼€å‘ä¸­")},handleTitleChange(e,t){const n=this.titles.find(e=>e.titleId===t);n&&(e.titleId=n.titleId,e.titleName=n.titleName,e.taxNumber=n.taxNumber),console.log("å‘ç¥¨æŠ¬å¤´æ”¹å˜:",e)},handleReceiverChange(e){const t=this.receivers.find(t=>t.id===e.receiverId);t&&(e.receiverId=t.id,e.receiverName=t.name,e.receiverPhone=t.phone,e.receiverEmail=t.email,e.receiverAddress=t.address),console.log("æ”¶è´§äººæ”¹å˜:",e)},validateRow(e){return e.invoiceType?!e.amount||e.amount<=0?(this.$message.warning("å¼€ç¥¨é‡‘é¢å¿…é¡»å¤§äº0"),!1):e.titleId?e.receiverId?!(""!==e.quantity&&null!==e.quantity&&void 0!==e.quantity&&e.quantity<1)||(this.$message.warning("æ•°é‡å¿…é¡»å¤§äºç­‰äº1"),!1):(this.$message.warning("è¯·é€‰æ‹©æ”¶è´§äºº"),!1):(this.$message.warning("è¯·é€‰æ‹©å‘ç¥¨æŠ¬å¤´"),!1):(this.$message.warning("è¯·é€‰æ‹©å‘ç¥¨ç§ç±»"),!1)},handleCancel(){this.$emit("cancel")},handleSubmit(){for(let e of this.localInvoiceRows)if(!this.validateRow(e))return;this.$emit("submit",this.localInvoiceRows)}}},c=(n(335),Object(s.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"invoice-form"},[e.hasGrouping?t("div",{staticClass:"info-banner"},[t("div",{staticClass:"info-icon"}),e._v(" "),t("div",{staticClass:"info-content"},[e._v("å¼€ç¥¨ä¿¡æ¯å·²æŒ‰ "),t("strong",[e._v(e._s(e.groupingDescription))]),e._v(" æ‹†åˆ†å±•ç¤º")])]):e._e(),e._v(" "),t("el-table",{staticClass:"invoice-table",staticStyle:{width:"100%"},attrs:{data:e.localInvoiceRows,border:"","span-method":e.handleSpanMethod}},[t("el-table-column",{attrs:{prop:"invoiceType",label:"å‘ç¥¨ç§ç±»",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[e._v("\n        "+e._s(t.invoiceType||t.invoiceTypeName||"-")+"\n      ")]}}])}),e._v(" "),e._l(e.splitConfig.dimensions||[],(function(n,i){return t("el-table-column",{key:"split_dim_"+i,attrs:{label:e.getDimensionLabel(n),width:"120"},scopedSlots:e._u([{key:"default",fn:function({row:n}){return[0===i?t("span",[e._v("\n          "+e._s(n.splitDimension1||n.businessLine||"-")+"\n        ")]):1===i?t("span",[e._v("\n          "+e._s(n.splitDimension2||n.legalEntity||"-")+"\n        ")]):e._e()]}}],null,!0)})})),e._v(" "),t("el-table-column",{attrs:{prop:"summary",label:"å‘ç¥¨æ‘˜è¦",width:"180"},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[e._v("\n        "+e._s(t.summary||t.invoiceSummary||"-")+"\n      ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"amount",label:"å¼€ç¥¨é‡‘é¢(CNY)",width:"150",align:"right"},scopedSlots:e._u([{key:"default",fn:function({row:n}){return[t("div",{staticClass:"amount-cell"},[t("span",[e._v(e._s(e.formatAmount(n.amount)))]),e._v(" "),t("el-link",{staticClass:"split-link",attrs:{type:"primary",underline:!1},on:{click:function(t){return e.handleSplit(n)}}},[e._v("\n            æ‹†åˆ†\n          ")])],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"å‘ç¥¨æŠ¬å¤´",width:"250"},scopedSlots:e._u([{key:"default",fn:function({row:n}){return[t("div",{staticClass:"title-cell"},[t("invoice-title-selector",{attrs:{titles:e.titles,size:"small"},on:{change:function(t){return e.handleTitleChange(n,t)}},model:{value:n.titleId,callback:function(t){e.$set(n,"titleId",t)},expression:"row.titleId"}}),e._v(" "),t("div",{staticClass:"title-actions"},[t("el-link",{staticClass:"action-link",attrs:{type:"primary",underline:!1},on:{click:e.handleAddTitle}},[e._v("\n              æ–°å¢å‘ç¥¨æŠ¬å¤´>\n            ")]),e._v(" "),t("el-link",{staticClass:"action-link",attrs:{type:"primary",underline:!1},on:{click:function(t){return e.handleTitleDetail(n)}}},[e._v("\n              æŠ¬å¤´è¯¦æƒ…\n            ")])],1)],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"æ”¶è´§äººä¿¡æ¯",width:"200"},scopedSlots:e._u([{key:"default",fn:function({row:n}){return[t("el-select",{attrs:{placeholder:"è¯·é€‰æ‹©æ”¶è´§äºº",size:"small"},on:{change:function(t){return e.handleReceiverChange(n)}},model:{value:n.receiverId,callback:function(t){e.$set(n,"receiverId",t)},expression:"row.receiverId"}},e._l(e.receivers,(function(n){return t("el-option",{key:n.id,attrs:{label:e.formatReceiverLabel(n),value:n.id}},[t("div",{staticClass:"receiver-option"},[t("div",[e._v(e._s(n.name)+" "+e._s(n.phone))]),e._v(" "),t("div",{staticClass:"receiver-email"},[e._v(e._s(n.email))])])])})),1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"å•ä½",width:"100"},scopedSlots:e._u([{key:"default",fn:function({row:n}){return[t("el-select",{attrs:{placeholder:"è¯·é€‰æ‹©",size:"small"},model:{value:n.unit,callback:function(t){e.$set(n,"unit",t)},expression:"row.unit"}},[t("el-option",{attrs:{label:"/",value:"/"}}),e._v(" "),t("el-option",{attrs:{label:"æ¬¡",value:"æ¬¡"}}),e._v(" "),t("el-option",{attrs:{label:"å¤©",value:"å¤©"}}),e._v(" "),t("el-option",{attrs:{label:"ä¸ª",value:"ä¸ª"}}),e._v(" "),t("el-option",{attrs:{label:"äºº",value:"äºº"}}),e._v(" "),t("el-option",{attrs:{label:"é—´å¤œ",value:"é—´å¤œ"}}),e._v(" "),t("el-option",{attrs:{label:"é—´",value:"é—´"}}),e._v(" "),t("el-option",{attrs:{label:"æ‰¹",value:"æ‰¹"}})],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"æ•°é‡",width:"100"},scopedSlots:e._u([{key:"default",fn:function({row:n}){return[t("el-input",{attrs:{type:"number",placeholder:"è¯·è¾“å…¥æ•°é‡",size:"small",min:1,max:99999},on:{change:function(t){return e.handleQuantityChange(n)}},model:{value:n.quantity,callback:function(t){e.$set(n,"quantity",t)},expression:"row.quantity"}})]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"æ”¶ä»¶é‚®ç®±",width:"200"},scopedSlots:e._u([{key:"default",fn:function({row:n}){return[t("el-input",{attrs:{placeholder:"è¯·è¾“å…¥æ”¶ä»¶é‚®ç®±",size:"small"},model:{value:n.receiverEmail,callback:function(t){e.$set(n,"receiverEmail",t)},expression:"row.receiverEmail"}})]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"å‘ç¥¨å¤‡æ³¨",width:"200"},scopedSlots:e._u([{key:"default",fn:function({row:n}){return[t("el-input",{attrs:{type:"textarea",rows:2,placeholder:"è¯·è¾“å…¥å¤‡æ³¨",size:"small"},model:{value:n.remark,callback:function(t){e.$set(n,"remark",t)},expression:"row.remark"}})]}}])})],2),e._v(" "),t("div",{staticClass:"form-footer"},[t("el-button",{on:{click:e.handleCancel}},[e._v("å–æ¶ˆ")]),e._v(" "),t("el-button",{attrs:{type:"primary",loading:e.submitting},on:{click:e.handleSubmit}},[e._v("æäº¤å¼€ç¥¨")])],1)],1)}),[],!1,null,"36a2af1b",null));t.a=c.exports},315:function(e,t,n){"use strict";var i=n(0),s={name:"InvoiceSplitConfig",props:{value:{type:Boolean,default:!1},currentConfig:{type:Object,default:()=>({dimension1:"",dimension2:""})}},data(){return{visible:this.value,saving:!1,form:{dimension1:"",dimension2:""},dimensionOptions:[{label:"ä¸šåŠ¡çº¿",value:i.SPLIT_DIMENSION.BUSINESS_LINE,disabled:!1},{label:"æ³•äººå®ä½“",value:i.SPLIT_DIMENSION.LEGAL_ENTITY,disabled:!1},{label:"æ”¯ä»˜è´¦æˆ·",value:i.SPLIT_DIMENSION.PAYMENT_ACCOUNT,disabled:!1},{label:"éƒ¨é—¨",value:i.SPLIT_DIMENSION.DEPARTMENT,disabled:!1},{label:"å‡ºè¡Œäºº",value:i.SPLIT_DIMENSION.TRAVELER,disabled:!1},{label:"æœ€åŸå§‹è®¢å•å·",value:i.SPLIT_DIMENSION.ORIGINAL_ORDER_NO,disabled:!0}],rules:{dimension1:[{required:!0,message:"è¯·é€‰æ‹©ç¬¬ä¸€ä¸ªæ‹†åˆ†ç»´åº¦",trigger:"change"}],dimension2:[{validator:this.validateDimension2,trigger:"change"}]}}},watch:{value(e){this.visible=e,e&&this.initForm()},visible(e){this.$emit("input",e)}},methods:{initForm(){this.form={dimension1:this.currentConfig.dimension1||"",dimension2:this.currentConfig.dimension2||""},this.$nextTick(()=>{this.$refs.splitForm&&this.$refs.splitForm.clearValidate()})},handleDimensionChange(){this.$nextTick(()=>{this.$refs.splitForm&&this.$refs.splitForm.validateField("dimension2")})},validateDimension2(e,t,n){t&&t===this.form.dimension1?n(new Error("å­—æ®µä¸èƒ½é‡å¤")):n()},getDimensionLabel(e){const t=this.dimensionOptions.find(t=>t.value===e);return t?t.label:e},handleClose(){this.visible=!1},async handleSave(){try{await this.$refs.splitForm.validate()}catch(e){return}this.saving=!0;try{const e={dimension1:this.form.dimension1,dimension2:this.form.dimension2||""};this.$emit("save",e),this.$message.success("æ‹†åˆ†æ±‡æ€»é…ç½®ä¿å­˜æˆåŠŸ"),this.visible=!1}catch(e){this.$message.error(e.message||"ä¿å­˜é…ç½®å¤±è´¥")}finally{this.saving=!1}}}},a=(n(337),n(12)),o=Object(a.a)(s,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"æ‹†åˆ†æ±‡æ€»é…ç½®",visible:e.visible,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t},close:e.handleClose}},[t("div",{staticClass:"split-config-content"},[t("p",{staticClass:"config-description"},[t("i",{staticClass:"el-icon-info"}),e._v("\n      é…ç½®æ‹†åˆ†ç»´åº¦åï¼Œå¼€ç¥¨ä¿¡æ¯è¡¨å°†æŒ‰ç…§é€‰å®šçš„ç»´åº¦è¿›è¡Œåˆ†ç»„å±•ç¤º\n    ")]),e._v(" "),t("el-form",{ref:"splitForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"å­—æ®µä¸€",prop:"dimension1"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"è¯·é€‰æ‹©ç¬¬ä¸€ä¸ªæ‹†åˆ†ç»´åº¦"},on:{change:e.handleDimensionChange},model:{value:e.form.dimension1,callback:function(t){e.$set(e.form,"dimension1",t)},expression:"form.dimension1"}},e._l(e.dimensionOptions,(function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value,disabled:n.disabled||n.value===e.form.dimension2}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"å­—æ®µäºŒ",prop:"dimension2"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"è¯·é€‰æ‹©ç¬¬äºŒä¸ªæ‹†åˆ†ç»´åº¦ï¼ˆå¯é€‰ï¼‰",clearable:""},on:{change:e.handleDimensionChange},model:{value:e.form.dimension2,callback:function(t){e.$set(e.form,"dimension2",t)},expression:"form.dimension2"}},e._l(e.dimensionOptions,(function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value,disabled:n.disabled||n.value===e.form.dimension1}})})),1)],1),e._v(" "),e.form.dimension1?t("div",{staticClass:"config-preview"},[t("div",{staticClass:"preview-title"},[e._v("é¢„è§ˆæ•ˆæœ")]),e._v(" "),t("div",{staticClass:"preview-content"},[t("div",{staticClass:"preview-item"},[t("i",{staticClass:"el-icon-folder-opened"}),e._v(" "),t("span",[e._v(e._s(e.getDimensionLabel(e.form.dimension1)))]),e._v(" "),e.form.dimension2?[t("i",{staticClass:"el-icon-right"}),e._v(" "),t("i",{staticClass:"el-icon-folder-opened"}),e._v(" "),t("span",[e._v(e._s(e.getDimensionLabel(e.form.dimension2)))])]:e._e()],2),e._v(" "),t("div",{staticClass:"info-banner",staticStyle:{"margin-top":"12px"}},[t("div",{staticClass:"info-icon"}),e._v(" "),t("div",{staticClass:"info-content"},[e._v("\n              é€‰æ‹©æ‹†åˆ†ç»´åº¦åï¼Œè´¦å•æ±‡æ€»å°†æŒ‰ç…§æ‰€é€‰ç»´åº¦è¿›è¡Œå¤šå±‚çº§å±•ç¤º\n            ")])])])]):e._e()],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("å–æ¶ˆ")]),e._v(" "),t("el-button",{attrs:{type:"primary",loading:e.saving},on:{click:e.handleSave}},[e._v("ä¿å­˜é…ç½®")])],1)])}),[],!1,null,"02a7e186",null);t.a=o.exports},316:function(e,t,n){var i={"./af":163,"./af.js":163,"./ar":164,"./ar-dz":165,"./ar-dz.js":165,"./ar-kw":166,"./ar-kw.js":166,"./ar-ly":167,"./ar-ly.js":167,"./ar-ma":168,"./ar-ma.js":168,"./ar-ps":169,"./ar-ps.js":169,"./ar-sa":170,"./ar-sa.js":170,"./ar-tn":171,"./ar-tn.js":171,"./ar.js":164,"./az":172,"./az.js":172,"./be":173,"./be.js":173,"./bg":174,"./bg.js":174,"./bm":175,"./bm.js":175,"./bn":176,"./bn-bd":177,"./bn-bd.js":177,"./bn.js":176,"./bo":178,"./bo.js":178,"./br":179,"./br.js":179,"./bs":180,"./bs.js":180,"./ca":181,"./ca.js":181,"./cs":182,"./cs.js":182,"./cv":183,"./cv.js":183,"./cy":184,"./cy.js":184,"./da":185,"./da.js":185,"./de":186,"./de-at":187,"./de-at.js":187,"./de-ch":188,"./de-ch.js":188,"./de.js":186,"./dv":189,"./dv.js":189,"./el":190,"./el.js":190,"./en-au":191,"./en-au.js":191,"./en-ca":192,"./en-ca.js":192,"./en-gb":193,"./en-gb.js":193,"./en-ie":194,"./en-ie.js":194,"./en-il":195,"./en-il.js":195,"./en-in":196,"./en-in.js":196,"./en-nz":197,"./en-nz.js":197,"./en-sg":198,"./en-sg.js":198,"./eo":199,"./eo.js":199,"./es":200,"./es-do":201,"./es-do.js":201,"./es-mx":202,"./es-mx.js":202,"./es-us":203,"./es-us.js":203,"./es.js":200,"./et":204,"./et.js":204,"./eu":205,"./eu.js":205,"./fa":206,"./fa.js":206,"./fi":207,"./fi.js":207,"./fil":208,"./fil.js":208,"./fo":209,"./fo.js":209,"./fr":210,"./fr-ca":211,"./fr-ca.js":211,"./fr-ch":212,"./fr-ch.js":212,"./fr.js":210,"./fy":213,"./fy.js":213,"./ga":214,"./ga.js":214,"./gd":215,"./gd.js":215,"./gl":216,"./gl.js":216,"./gom-deva":217,"./gom-deva.js":217,"./gom-latn":218,"./gom-latn.js":218,"./gu":219,"./gu.js":219,"./he":220,"./he.js":220,"./hi":221,"./hi.js":221,"./hr":222,"./hr.js":222,"./hu":223,"./hu.js":223,"./hy-am":224,"./hy-am.js":224,"./id":225,"./id.js":225,"./is":226,"./is.js":226,"./it":227,"./it-ch":228,"./it-ch.js":228,"./it.js":227,"./ja":229,"./ja.js":229,"./jv":230,"./jv.js":230,"./ka":231,"./ka.js":231,"./kk":232,"./kk.js":232,"./km":233,"./km.js":233,"./kn":234,"./kn.js":234,"./ko":235,"./ko.js":235,"./ku":236,"./ku-kmr":237,"./ku-kmr.js":237,"./ku.js":236,"./ky":238,"./ky.js":238,"./lb":239,"./lb.js":239,"./lo":240,"./lo.js":240,"./lt":241,"./lt.js":241,"./lv":242,"./lv.js":242,"./me":243,"./me.js":243,"./mi":244,"./mi.js":244,"./mk":245,"./mk.js":245,"./ml":246,"./ml.js":246,"./mn":247,"./mn.js":247,"./mr":248,"./mr.js":248,"./ms":249,"./ms-my":250,"./ms-my.js":250,"./ms.js":249,"./mt":251,"./mt.js":251,"./my":252,"./my.js":252,"./nb":253,"./nb.js":253,"./ne":254,"./ne.js":254,"./nl":255,"./nl-be":256,"./nl-be.js":256,"./nl.js":255,"./nn":257,"./nn.js":257,"./oc-lnc":258,"./oc-lnc.js":258,"./pa-in":259,"./pa-in.js":259,"./pl":260,"./pl.js":260,"./pt":261,"./pt-br":262,"./pt-br.js":262,"./pt.js":261,"./ro":263,"./ro.js":263,"./ru":264,"./ru.js":264,"./sd":265,"./sd.js":265,"./se":266,"./se.js":266,"./si":267,"./si.js":267,"./sk":268,"./sk.js":268,"./sl":269,"./sl.js":269,"./sq":270,"./sq.js":270,"./sr":271,"./sr-cyrl":272,"./sr-cyrl.js":272,"./sr.js":271,"./ss":273,"./ss.js":273,"./sv":274,"./sv.js":274,"./sw":275,"./sw.js":275,"./ta":276,"./ta.js":276,"./te":277,"./te.js":277,"./tet":278,"./tet.js":278,"./tg":279,"./tg.js":279,"./th":280,"./th.js":280,"./tk":281,"./tk.js":281,"./tl-ph":282,"./tl-ph.js":282,"./tlh":283,"./tlh.js":283,"./tr":284,"./tr.js":284,"./tzl":285,"./tzl.js":285,"./tzm":286,"./tzm-latn":287,"./tzm-latn.js":287,"./tzm.js":286,"./ug-cn":288,"./ug-cn.js":288,"./uk":289,"./uk.js":289,"./ur":290,"./ur.js":290,"./uz":291,"./uz-latn":292,"./uz-latn.js":292,"./uz.js":291,"./vi":293,"./vi.js":293,"./x-pseudo":294,"./x-pseudo.js":294,"./yo":295,"./yo.js":295,"./zh-cn":296,"./zh-cn.js":296,"./zh-hk":297,"./zh-hk.js":297,"./zh-mo":298,"./zh-mo.js":298,"./zh-tw":299,"./zh-tw.js":299};function s(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=a,e.exports=s,s.id=316},333:function(e,t,n){"use strict";n(309)},334:function(e,t,n){(t=n(19)(!1)).push([e.i,".title-option .title-main[data-v-0b12f5d4] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 4px;\n}\n.title-option .title-main .title-name[data-v-0b12f5d4] {\n  font-weight: 600;\n  color: #303133;\n}\n.title-option .title-info[data-v-0b12f5d4] {\n  font-size: 13px;\n  color: #909399;\n}\n",""]),e.exports=t},335:function(e,t,n){"use strict";n(310)},336:function(e,t,n){(t=n(19)(!1)).push([e.i,".invoice-form .info-banner strong[data-v-36a2af1b] {\n  color: #2555FF;\n  font-weight: 600;\n}\n.invoice-form .invoice-table[data-v-36a2af1b] {\n  margin-bottom: 24px;\n}\n.invoice-form .invoice-table .amount-cell[data-v-36a2af1b] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.invoice-form .invoice-table .amount-cell .split-link[data-v-36a2af1b] {\n  font-size: 12px;\n}\n.invoice-form .invoice-table .title-cell .title-actions[data-v-36a2af1b] {\n  display: flex;\n  gap: 8px;\n  margin-top: 4px;\n}\n.invoice-form .invoice-table .title-cell .title-actions .action-link[data-v-36a2af1b] {\n  font-size: 12px;\n}\n.invoice-form .invoice-table .receiver-option .receiver-email[data-v-36a2af1b] {\n  font-size: 12px;\n  color: #909399;\n}\n.invoice-form .form-footer[data-v-36a2af1b] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 16px;\n  padding-top: 16px;\n  border-top: 1px solid #dcdfe6;\n}\n",""]),e.exports=t},337:function(e,t,n){"use strict";n(311)},338:function(e,t,n){(t=n(19)(!1)).push([e.i,".split-config-content .config-description[data-v-02a7e186] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 16px;\n  background: #f5f7fa;\n  border-radius: 4px;\n  color: #2555FF;\n  font-size: 14px;\n  margin-bottom: 24px;\n}\n.split-config-content .config-description i[data-v-02a7e186] {\n  font-size: 18px;\n}\n.split-config-content .config-preview[data-v-02a7e186] {\n  margin-top: 24px;\n  padding: 16px;\n  background: #E8EEFF;\n  border: 1px solid #B3C5FF;\n  border-radius: 4px;\n}\n.split-config-content .config-preview .preview-title[data-v-02a7e186] {\n  font-size: 13px;\n  color: #909399;\n  margin-bottom: 8px;\n}\n.split-config-content .config-preview .preview-content .preview-item[data-v-02a7e186] {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 8px 0;\n  font-size: 14px;\n  color: #303133;\n}\n.split-config-content .config-preview .preview-content .preview-item i[data-v-02a7e186] {\n  color: #2555FF;\n  font-size: 16px;\n}\n.split-config-content .config-preview .preview-content .preview-item span[data-v-02a7e186] {\n  font-weight: 500;\n}\n",""]),e.exports=t}}]);